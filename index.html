<!DOCTYPE html>
<html>
<head>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body { font-family: sans-serif; display: none; padding: 20px; }
        .authorized { display: block; }
    </style>
</head>
<body>
    <div id="app">
        <h1>Бронирование</h1>
        <input type="text" id="name" placeholder="Имя заказчика"><br><br>
        <input type="text" id="address" placeholder="Адрес доставки"><br><br>
        <button onclick="sendData()">Создать заявку</button>
        <div id="status"></div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        const WORKER_URL = "https://ваш-воркер.workers.dev";

        if (tg.initData) {
            document.body.classList.add('authorized');
            tg.expand();
        }

        async function sendData() {
            const statusDiv = document.getElementById('status');
            statusDiv.innerText = "Отправка...";

            const response = await fetch(WORKER_URL, {
                method: 'POST',
                body: JSON.stringify({
                    initData: tg.initData,
                    action: "createOrder",
                    payload: {
                        name: document.getElementById('name').value,
                        address: document.getElementById('address').value
                    }
                })
            });

            if (response.ok) {
                statusDiv.innerText = "Успешно сохранено!";
                tg.close();
            } else {
                statusDiv.innerText = "Ошибка доступа.";
            }
        }
    </script>
</body>
</html>

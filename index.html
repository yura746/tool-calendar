<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–∞–ª–µ–Ω–¥–∞—Ä—å –∞—Ä–µ–Ω–¥—ã –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤</title>
    <script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.15/index.global.min.js'></script>
    <style>
        body { font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif; margin: 0; background: #f8f9fa; }
        .container { max-width: 1400px; margin: 0 auto; padding: 20px; }
        h1 { color: #2c3e50; margin-bottom: 10px; }
        .toolbar { background: white; padding: 15px; border-radius: 12px; box-shadow: 0 2px 10px rgba(0,0,0,0.08); margin-bottom: 20px; }
        #calendar { background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 20px rgba(0,0,0,0.1); }
        .fc-toolbar-title { font-size: 24px; font-weight: 600; color: #2c3e50 !important; }
        .fc-button { background: #3498db !important; border: none !important; border-radius: 6px !important; }
        .fc-button:hover { background: #2980b9 !important; }
        .fc-event { border-radius: 6px !important; font-size: 12px !important; font-weight: 500; }
        .fc-event-title { display: none; }
        .event-info { position: fixed; background: white; border: 1px solid #e0e6ed; 
                      padding: 15px; border-radius: 8px; z-index: 9999; box-shadow: 0 10px 30px rgba(0,0,0,0.2); 
                      max-width: 300px; display: none; }
        .resource-group { font-weight: 600; color: #2c3e50; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üìÖ –ö–∞–ª–µ–Ω–¥–∞—Ä—å –ø—Ä–æ–∫–∞—Ç–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ (001-260)</h1>
        <div class="toolbar">
            <div>–û–±–Ω–æ–≤–ª–µ–Ω–æ: <span id="last-update">–∑–∞–≥—Ä—É–∑–∫–∞...</span></div>
            <button onclick="reloadCalendar()">üîÑ –û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ</button>
        </div>
        <div id='calendar'></div>
        <div id="event-info" class="event-info">
            <div id="event-details"></div>
        </div>
    </div>

    <script>
        let calendar;
        let allTools = [];

        document.addEventListener('DOMContentLoaded', function() {
            const calendarEl = document.getElementById('calendar');
            
            calendar = new FullCalendar.Calendar(calendarEl, {
                initialView: 'resourceTimeGridWeek', // –ù–µ–¥–µ–ª—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
                views: {
                    resourceTimeGridWeek: { type: 'resourceTimeGrid', duration: { weeks: 1 } },
                    resourceTimeGridDay: { type: 'resourceTimeGrid', duration: { days: 1 } },
                    resourceDayGridMonth: { type: 'resourceDayGridMonth', duration: { months: 1 } }
                },
                headerToolbar: {
                    left: 'prev,next today',
                    center: 'title',
                    right: 'timeGridWeek,timeGridDay,dayGridMonth'
                },
                resources: generateToolGroups(), // 26 –≥—Ä—É–ø–ø –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
                events: [],
                height: 'auto',
                aspectRatio: 2.8,
                slotMinTime: '08:00:00',
                slotMaxTime: '20:00:00',
                nowIndicator: true,
                eventClick: showEventInfo,
                eventMouseEnter: showEventTooltip,
                eventMouseLeave: hideEventTooltip
            });

            calendar.render();
            loadRealData(); // –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
        });

        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≥—Ä—É–ø–ø –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ (001-260)
        function generateToolGroups() {
            const groups = [];
            const groupNames = ['–ü–µ—Ä—Ñ–æ—Ä–∞—Ç–æ—Ä—ã', '–®—É—Ä—É–ø–æ–≤–µ—Ä—Ç—ã', '–ë–æ–ª–≥–∞—Ä–∫–∏', '–®—Ç—Ä–æ–±–æ—Ä–µ–∑—ã', '–õ–µ—Å—Ç–Ω–∏—Ü—ã'];
            
            for (let i = 1; i <= 26; i++) {
                groups.push({
                    id: i,
                    title: `${groupNames[i%5]} (${(i-1)*10+1}-${i*10})`,
                    children: []
                });
            }
            return groups;
        }

        // –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ (–∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ –ú–æ–π–°–∫–ª–∞–¥ API)
        async function loadRealData() {
            // –ò–º–∏—Ç–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ –ú–æ–π–°–∫–ª–∞–¥
            const mockBookings = [
                { id: '001', resourceId: 1, title: '–ü–µ—Ä—Ñ–æ—Ä–∞—Ç–æ—Ä ‚Ññ001', start: '2024-02-15T10:00:00', 
                  end: '2024-02-16T18:00:00', client: '–ò–≤–∞–Ω–æ–≤ –ò.–ò.', phone: '+7(999)123-45-67' },
                { id: '005', resourceId: 1, title: '–ü–µ—Ä—Ñ–æ—Ä–∞—Ç–æ—Ä ‚Ññ005', start: '2024-02-16T14:00:00', 
                  end: '2024-02-18T12:00:00', client: '–ü–µ—Ç—Ä–æ–≤ –ü.–ü.', phone: '+7(999)765-43-21' },
                { id: '011', resourceId: 2, title: '–®—É—Ä—É–ø–æ–≤–µ—Ä—Ç ‚Ññ011', start: '2024-02-17T09:00:00', 
                  end: '2024-02-18T17:00:00', client: '–°–∏–¥–æ—Ä–æ–≤ –°.–°.', phone: '+7(999)111-22-33' }
            ];

            calendar.removeAllEvents();
            calendar.addEventSource(mockBookings);
            document.getElementById('last-update').textContent = new Date().toLocaleString();
        }

        function showEventInfo(info) {
            const event = info.event;
            const details = document.getElementById('event-details');
            details.innerHTML = `
                <h4>${event.title}</h4>
                <p><strong>–ö–ª–∏–µ–Ω—Ç:</strong> ${event.extendedProps.client}</p>
                <p><strong>–¢–µ–ª–µ—Ñ–æ–Ω:</strong> ${event.extendedProps.phone}</p>
                <p><strong>–ü–µ—Ä–∏–æ–¥:</strong> ${event.start.toLocaleString()} - ${event.end.toLocaleString()}</p>
            `;
            document.getElementById('event-info').style.display = 'block';
        }

        function reloadCalendar() {
            loadRealData();
        }

        // –ó–∞–∫—Ä—ã—Ç–∏–µ –∏–Ω—Ñ–æ –ø–æ –∫–ª–∏–∫—É –≤–Ω–µ –æ–±–ª–∞—Å—Ç–∏
        document.addEventListener('click', function(e) {
            if (!e.target.closest('.fc-event')) {
                document.getElementById('event-info').style.display = 'none';
            }
        });
    </script>
</body>
</html>
